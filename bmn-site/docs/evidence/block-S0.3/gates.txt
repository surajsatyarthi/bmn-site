
> bmn-site@0.1.0 ralph:gates
> bash scripts/validate-ralph-gates.sh S0.3

ü¶Ö Ralph Protocol v6.0: Gate Validation [Block S0.3]
========================================================
G1: Physical Audit... ‚úÖ PASS
G2: Task Spec Review... ‚úÖ PASS
G3: Implementation Plan... ‚úÖ PASS
G4: Build... 
> bmn-site@0.1.0 build
> next build

‚ö† Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/surajsatyarthi/Projects/active/BMN/pnpm-lock.yaml as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/surajsatyarthi/Projects/active/BMN/bmn-site/pnpm-lock.yaml

‚ñ≤ Next.js 16.1.6 (Turbopack)
- Environments: .env.local
- Experiments (use with caution):
  ¬∑ clientTraceMetadata

‚ö† The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
  Creating an optimized production build ...
‚úì Compiled successfully in 3.4s
  Running next.config.js provided runAfterProductionCompile ...
‚úì Completed runAfterProductionCompile in 351ms
  Running TypeScript ...
  Collecting page data using 9 workers ...
  Generating static pages using 9 workers (0/28) ...
  Generating static pages using 9 workers (7/28) 
  Generating static pages using 9 workers (14/28) 
  Generating static pages using 9 workers (21/28) 
‚úì Generating static pages using 9 workers (28/28) in 164.0ms
  Finalizing page optimization ...

Route (app)
‚îå ‚óã /
‚îú ‚óã /_not-found
‚îú ∆í /admin
‚îú ∆í /admin/campaigns
‚îú ∆í /admin/matches/upload
‚îú ∆í /admin/users
‚îú ∆í /admin/users/[id]
‚îú ∆í /api/admin/matches
‚îú ∆í /api/admin/users
‚îú ∆í /api/admin/users/[id]
‚îú ∆í /api/campaigns
‚îú ∆í /api/campaigns/[id]
‚îú ∆í /api/health
‚îú ∆í /api/matches
‚îú ∆í /api/matches/[id]
‚îú ∆í /api/matches/[id]/reveal
‚îú ∆í /api/profile
‚îú ∆í /api/profile/onboarding
‚îú ∆í /campaigns
‚îú ∆í /campaigns/[id]
‚îú ‚óã /contact
‚îú ∆í /dashboard
‚îú ∆í /forgot-password
‚îú ‚óã /icon.png
‚îú ∆í /login
‚îú ∆í /matches
‚îú ∆í /matches/[id]
‚îú ∆í /onboarding
‚îú ‚óã /privacy
‚îú ∆í /profile
‚îú ‚óã /refund
‚îú ∆í /signup
‚îú ‚óã /terms
‚îî ∆í /verify-email


∆í Proxy (Middleware)

‚óã  (Static)   prerendered as static content
∆í  (Dynamic)  server-rendered on demand

‚úÖ PASS
G5: Lint... 
> bmn-site@0.1.0 lint
> eslint


/Users/surajsatyarthi/Projects/active/BMN/bmn-site/src/app/(admin)/admin/matches/upload/page.tsx
  9:37  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

/Users/surajsatyarthi/Projects/active/BMN/bmn-site/src/app/(auth)/forgot-password/page.tsx
  9:37  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

/Users/surajsatyarthi/Projects/active/BMN/bmn-site/src/app/(auth)/login/page.tsx
  9:37  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

/Users/surajsatyarthi/Projects/active/BMN/bmn-site/src/app/(auth)/signup/page.tsx
  9:37  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

/Users/surajsatyarthi/Projects/active/BMN/bmn-site/src/app/(auth)/verify-email/page.tsx
  9:37  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

‚úñ 5 problems (5 errors, 0 warnings)

‚ùå FAIL
G6: Security Scan... 
ü¶Ö Ralph Protocol v5.1: Security Scanner [FULL]


üìã CODE CHECKS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üî¥ SEC-001: Payment Replay Attack Vulnerability... ‚úÖ
üî¥ SEC-002: Production Mock Data Fallback... ‚úÖ
üî¥ SEC-003: Environment Variable Validation... ‚úÖ
üî¥ SEC-004: No Secrets in Source Code... ‚úÖ
üü° SEC-005: Rate Limiting on POST Routes... ‚úÖ
üü° QA-001: Error Boundary Existence... ‚úÖ
üü° QA-002: Loading State Existence... ‚úÖ
üü° QA-003: Interactive Elements Accessibility... ‚úÖ
üî¥ QA-004: Metadata Export... ‚úÖ

üìã DEPENDENCY CHECKS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üî¥ DEP-001: Required Dependencies Installed... ‚úÖ

üìã BUILD CHECKS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üî¥ BLD-001: TypeScript compilation succeeds... ‚úÖ
üî¥ BLD-002: Next.js build succeeds... ‚úÖ
üü° BLD-003: ESLint passes (src/)...    Linting failed in src/
‚ùå
   Severity: P1
   Description: Source code must pass linting.
   Fix: Run: npx eslint src/ --fix

üìã DEPLOYMENT CHECKS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üü° DPL-001: Env vars documented in .env.example... ‚úÖ
üü° DPL-002: Git is clean...    Uncommitted changes:
      M .husky/pre-commit
      M .husky/pre-push
      M bmn-site/docs/evidence/block-S0.3/gates.txt
      M docs/governance/project_ledger.md
      D docs/governance/project_ledger.md.bak
     ?? docs/governance/project_ledger.tmp
‚ùå
   Severity: P1
   Description: All changes must be committed before deploy.
   Fix: Commit all changes before deploying.

==================================================
Security Scan Complete: 13/15 Passed
==================================================

‚ö†Ô∏è  P1 warnings (fix before launch)

‚úÖ PASS
G7: Tests... 
> bmn-site@0.1.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/Users/surajsatyarthi/Projects/active/BMN/bmn-site[39m

 [32m‚úì[39m tests/lib/rate-limit.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
[90mstderr[2m | tests/lib/api-error.test.ts[2m > [22m[2mhandleApiError[2m > [22m[2mshould handle unknown errors as 500
[22m[39mUnhandled error: Error: Something went wrong
    at [90m/Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mtests/lib/api-error.test.ts:34:19
    at [90mfile:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.33_jiti@2.6.1_jsdom@28.0.0_lig_9afb8edde56f362813de97e8789ff31a/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.33_jiti@2.6.1_jsdom@28.0.0_lig_9afb8edde56f362813de97e8789ff31a/node_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///Users/surajsatyarthi/Projects/active/BMN/bmn-site/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

 [32m‚úì[39m tests/lib/api-error.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m tests/lib/env.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m‚úì[39m tests/onboarding/HSCodeSearch.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 29[2mms[22m[39m

[2m Test Files [22m [1m[32m4 passed[39m[22m[90m (4)[39m
[2m      Tests [22m [1m[32m13 passed[39m[22m[90m (13)[39m
[2m   Start at [22m 00:39:59
[2m   Duration [22m 702ms[2m (transform 130ms, setup 153ms, import 185ms, tests 62ms, environment 1.44s)[22m

‚úÖ PASS
G8: Pre-submission Gate... ‚úÖ PASS
G9: Self-Audit... ‚úÖ PASS
G10: Visual Verification... ‚úÖ PASS (Skipped for System Block)
========================================================
‚õîÔ∏è 1 GATES FAILED. SUBMISSION BLOCKED.
